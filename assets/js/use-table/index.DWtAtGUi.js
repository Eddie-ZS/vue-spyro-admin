import{E as n,a as m,g as H}from"../index-CBSi0O3n.js";import{v as K}from"../loading/loading.Cqn3xEzL.js";import{_ as G}from"../SoTable.vue_vue_type_script_setup_true_lang/SoTable.vue_vue_type_script_setup_true_lang.BbBtMd9I.js";import{_ as J}from"../SoCard/SoCard.IvyB526y.js";import{E as X}from"../alert/alert.BVrviEmJ.js";import{E as j}from"../text/text.Cpu9aSfG.js";import{p as T,C as f,aA as u,I as t,aH as l,G as k,aE as Q,z as W,r as Y,s as Z,ax as x,ay as ee,R as a,as as i,aq as E,H as te}from"../.pnpm/.pnpm.BAJQU3fl.js";import{u as oe}from"../useTable/useTable.CiX_rXz-.js";import"../popover/popover.Ctfpia12.js";import"../index/index.qNiM3hAm.js";import"../useIcon/useIcon.BkmmCNnQ.js";import"../index/index.DF_-0bUr.js";import"../Icon.vue_vue_type_script_lang/Icon.vue_vue_type_script_lang.Bg9ZeC0o.js";/* empty css                             */import"../index/index.Bq7iSJq4.js";import"../strings/strings.Bx057136.js";import"../col/col.DkJxuSoL.js";import"../index/index.CuSw0IIQ.js";import"../index/index.DGrO33MT.js";import"../checkbox/checkbox.B-ksCEw1.js";import"../_plugin-vue_export-helper/_plugin-vue_export-helper.DlAUqK2U.js";import"../use/use.vltj-xWI.js";import"../card/card.BWDGv4Ub.js";const ae={class:"h-full flex-col gap-4"},le={class:"mt-3"},ne=T({name:"UseTable"}),Me=T({...ne,setup(se){const r=f(!0),z=u([{dictLabel:"男",dictValue:"male"},{dictLabel:"女",dictValue:"female"}]),L=u([{dictLabel:"正常",dictValue:0},{dictLabel:"禁用",dictValue:1}]),M=u([{type:"selection",label:"勾选",width:"55"},{type:"expand",label:"展开",width:"55",renderer:({row:o})=>t("div",{class:"block px-2"},[t(j,{type:"success"},{default:()=>[l("tsx渲染："),JSON.stringify(o)]})])},{type:"sortable",label:"排序",width:80},{type:"index",label:"序号",width:"55"},{prop:"username",label:"用户名",overflowConfig:{initiate:!0}},{prop:"nickname",label:"昵称"},{prop:"sex",label:"性别",dictConfig:{options:()=>z}},{prop:"phone",label:"手机号"},{prop:"email",label:"邮箱"},{prop:"status",label:"状态",tagConfig:{initiate:!0},dictConfig:{options:()=>L}},{prop:"operation",label:"操作",renderer:()=>t(k,null,[t(n,{type:"primary",link:!0,onClick:y},{default:()=>[l("修改")]}),t(n,{type:"primary",link:!0,onClick:w},{default:()=>[l("删除")]})])}]),p=u({pageNum:1,pageSize:10}),{tableState:N,tableMethods:V,tableMount:A}=oe({fetchApi:async()=>{const{data:o,total:e=0}=await H();return{data:o,total:e}}}),{loading:P,data:U}=Q(N),{setProps:g,addColumn:b,delColumn:_,getElTableInstance:v,refresh:F}=V,y=()=>{m.success("仅供预览展示")},w=()=>{m.success("仅供预览展示")},C=o=>{g({pagination:o})},S=o=>{o?b({type:"selection",width:"55",label:"勾选"},0):_("selection")};let c=f(!1);const I=async()=>{c.value=!c.value;const o=await v();U.value.forEach(e=>{o==null||o.toggleRowExpansion(e,c.value)})},R=async()=>{const o=await v();o==null||o.toggleAllSelection()};let d=f(!0);const $=()=>{d.value=!d.value,d.value?b({prop:"operation",label:"操作",renderer:()=>t(k,null,[t(n,{type:"primary",link:!0,onClick:y},{default:()=>[l("修改")]}),t(n,{type:"primary",link:!0,onClick:w},{default:()=>[l("删除")]})])}):_("operation")},B=({newIndex:o,oldIndex:e})=>{m.success("拖拽排序成功")};return W(()=>{g({rowKey:"userId",columnList:M})}),(o,e)=>{const D=X,h=J,O=G,q=K;return Y(),Z("div",ae,[x(t(h,{title:"useTable 操作"},{default:i(()=>[E("div",null,[t(D,{closable:!1,title:"基于基础表格封装useTable函数的高级用法",type:"info",description:"采用hook函数式搭配TSX语法的方式进行使用，配置高度灵活，表格都默认设置rowKey，优化表格渲染及保证树形、展开行、拖拽的正常功能。"}),E("div",le,[t(a(n),{onClick:e[0]||(e[0]=s=>C(!0))},{default:i(()=>[l("显示分页")]),_:1}),t(a(n),{onClick:e[1]||(e[1]=s=>C(!1))},{default:i(()=>[l("隐藏分页")]),_:1}),t(a(n),{onClick:e[2]||(e[2]=s=>S(!0))},{default:i(()=>[l("显示多选")]),_:1}),t(a(n),{onClick:e[3]||(e[3]=s=>S(!1))},{default:i(()=>[l("隐藏多选")]),_:1}),t(a(n),{onClick:I},{default:i(()=>[l("显示/隐藏展开行")]),_:1}),t(a(n),{onClick:R},{default:i(()=>[l("全选/全不选")]),_:1}),t(a(n),{onClick:$},{default:i(()=>[l("添加/删除操作列")]),_:1})])])]),_:1},512),[[ee,a(r)]]),t(h,{title:"useTable 示例",class:"flex-1"},{default:i(()=>[x(t(O,{height:"100%",currentPage:a(p).pageNum,"onUpdate:currentPage":e[4]||(e[4]=s=>a(p).pageNum=s),pageSize:a(p).pageSize,"onUpdate:pageSize":e[5]||(e[5]=s=>a(p).pageSize=s),showSearch:a(r),"onUpdate:showSearch":e[6]||(e[6]=s=>te(r)?r.value=s:null),onRefresh:a(F),onMount:a(A),onDragSort:B},null,8,["currentPage","pageSize","showSearch","onRefresh","onMount"]),[[q,a(P)]])]),_:1})])}}});export{Me as default};
