import{m as M,c as X,f as K,n as Ne,L as fe,x as $,e as ke,E as me,k as ve,h as oe,p as Pe,j as Be,B as Ke,bp as Le,w as De,q as ge}from"../index-BuEOIHYu.js";import{d as k,b as Me,u as de,E as Ae,O as Ge,w as ce}from"../index/index.DbjvkKX1.js";import{E as ze}from"../index/index.e1TFzEh3.js";import{a7 as Ye,p as A,aa as P,H as E,a9 as U,a5 as h,K as Ue,E as y,a4 as be,a3 as C,D as He,ac as V,I as _e,aD as _,r as L,am as H,an as b,ap as S,aX as Je,aY as Ve,q as je,aP as qe,J as Ie,bn as We,s as W,ba as Xe,ab as j,ak as Z,ai as x,al as Qe,ao as Ze,aq as ee,aj as xe,as as eo,ay as oo}from"../.pnpm/.pnpm.DOMSuxsb.js";import{_ as no}from"../Icon.vue_vue_type_script_lang/Icon.vue_vue_type_script_lang.Cj7Rf5yn.js";const we=(...e)=>o=>{e.forEach(r=>{Ye(r)?r(o):r.value=o})},to=A({inheritAttrs:!1});function lo(e,o,r,t,d,i){return P(e.$slots,"default")}var ro=M(to,[["render",lo],["__file","collection.vue"]]);const so=A({name:"ElCollectionItem",inheritAttrs:!1});function ao(e,o,r,t,d,i){return P(e.$slots,"default")}var io=M(so,[["render",ao],["__file","collection-item.vue"]]);const Ee="data-el-collection-item",he=e=>{const o=`El${e}Collection`,r=`${o}Item`,t=Symbol(o),d=Symbol(r),i={...ro,name:o,setup(){const s=E(null),p=new Map;U(t,{itemMap:p,getItems:()=>{const m=y(s);if(!m)return[];const f=Array.from(m.querySelectorAll(`[${Ee}]`));return[...p.values()].sort((n,u)=>f.indexOf(n.ref)-f.indexOf(u.ref))},collectionRef:s})}},c={...io,name:r,setup(s,{attrs:p}){const v=E(null),m=h(t,void 0);U(d,{collectionItemRef:v}),Ue(()=>{const f=y(v);f&&m.itemMap.set(f,{ref:f,...p})}),be(()=>{const f=y(v);m.itemMap.delete(f)})}};return{COLLECTION_INJECTION_KEY:t,COLLECTION_ITEM_INJECTION_KEY:d,ElCollection:i,ElCollectionItem:c}},co=X({style:{type:K([String,Array,Object])},currentTabId:{type:K(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:K(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:uo,ElCollectionItem:po,COLLECTION_INJECTION_KEY:ne,COLLECTION_ITEM_INJECTION_KEY:fo}=he("RovingFocusGroup"),te=Symbol("elRovingFocusGroup"),Ce=Symbol("elRovingFocusGroupItem"),mo={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},vo=(e,o)=>e,go=(e,o,r)=>{const t=vo(e.key);return mo[t]},bo=(e,o)=>e.map((r,t)=>e[(t+o)%e.length]),le=e=>{const{activeElement:o}=document;for(const r of e)if(r===o||(r.focus(),o!==document.activeElement))return},ue="currentTabIdChange",pe="rovingFocusGroup.entryFocus",_o={bubbles:!1,cancelable:!0},Io=A({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:co,emits:[ue,"entryFocus"],setup(e,{emit:o}){var r;const t=E((r=e.currentTabId||e.defaultCurrentTabId)!=null?r:null),d=E(!1),i=E(!1),c=E(null),{getItems:s}=h(ne,void 0),p=C(()=>[{outline:"none"},e.style]),v=a=>{o(ue,a)},m=()=>{d.value=!0},f=k(a=>{var g;(g=e.onMousedown)==null||g.call(e,a)},()=>{i.value=!0}),I=k(a=>{var g;(g=e.onFocus)==null||g.call(e,a)},a=>{const g=!y(i),{target:D,currentTarget:R}=a;if(D===R&&g&&!y(d)){const G=new Event(pe,_o);if(R==null||R.dispatchEvent(G),!G.defaultPrevented){const w=s().filter(F=>F.focusable),T=w.find(F=>F.active),O=w.find(F=>F.id===y(t)),z=[T,O,...w].filter(Boolean).map(F=>F.ref);le(z)}}i.value=!1}),n=k(a=>{var g;(g=e.onBlur)==null||g.call(e,a)},()=>{d.value=!1}),u=(...a)=>{o("entryFocus",...a)};U(te,{currentTabbedId:He(t),loop:V(e,"loop"),tabIndex:C(()=>y(d)?-1:0),rovingFocusGroupRef:c,rovingFocusGroupRootStyle:p,orientation:V(e,"orientation"),dir:V(e,"dir"),onItemFocus:v,onItemShiftTab:m,onBlur:n,onFocus:I,onMousedown:f}),_e(()=>e.currentTabId,a=>{t.value=a??null}),Ne(c,pe,u)}});function wo(e,o,r,t,d,i){return P(e.$slots,"default")}var Eo=M(Io,[["render",wo],["__file","roving-focus-group-impl.vue"]]);const ho=A({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:uo,ElRovingFocusGroupImpl:Eo}});function Co(e,o,r,t,d,i){const c=_("el-roving-focus-group-impl"),s=_("el-focus-group-collection");return L(),H(s,null,{default:b(()=>[S(c,Je(Ve(e.$attrs)),{default:b(()=>[P(e.$slots,"default")]),_:3},16)]),_:3})}var yo=M(ho,[["render",Co],["__file","roving-focus-group.vue"]]);const To=A({components:{ElRovingFocusCollectionItem:po},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(e,{emit:o}){const{currentTabbedId:r,loop:t,onItemFocus:d,onItemShiftTab:i}=h(te,void 0),{getItems:c}=h(ne,void 0),s=fe(),p=E(null),v=k(n=>{o("mousedown",n)},n=>{e.focusable?d(y(s)):n.preventDefault()}),m=k(n=>{o("focus",n)},()=>{d(y(s))}),f=k(n=>{o("keydown",n)},n=>{const{key:u,shiftKey:a,target:g,currentTarget:D}=n;if(u===$.tab&&a){i();return}if(g!==D)return;const R=go(n);if(R){n.preventDefault();let w=c().filter(T=>T.focusable).map(T=>T.ref);switch(R){case"last":{w.reverse();break}case"prev":case"next":{R==="prev"&&w.reverse();const T=w.indexOf(D);w=t.value?bo(w,T+1):w.slice(T+1);break}}je(()=>{le(w)})}}),I=C(()=>r.value===y(s));return U(Ce,{rovingFocusGroupItemRef:p,tabIndex:C(()=>y(I)?0:-1),handleMousedown:v,handleFocus:m,handleKeydown:f}),{id:s,handleKeydown:f,handleFocus:m,handleMousedown:v}}});function $o(e,o,r,t,d,i){const c=_("el-roving-focus-collection-item");return L(),H(c,{id:e.id,focusable:e.focusable,active:e.active},{default:b(()=>[P(e.$slots,"default")]),_:3},8,["id","focusable","active"])}var Oo=M(To,[["render",$o],["__file","roving-focus-item.vue"]]);const Fo=X({trigger:Me.trigger,effect:{...de.effect,default:"light"},type:{type:K(String)},placement:{type:K(String),default:"bottom"},popperOptions:{type:K(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:K([Number,String]),default:0},maxHeight:{type:K([Number,String]),default:""},popperClass:{type:String,default:""},disabled:Boolean,role:{type:String,default:"menu"},buttonProps:{type:K(Object)},teleported:de.teleported}),ye=X({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:ke}}),So=X({onKeydown:{type:K(Function)}}),Ro=[$.down,$.pageDown,$.home],Te=[$.up,$.pageUp,$.end],No=[...Ro,...Te],{ElCollection:ko,ElCollectionItem:Po,COLLECTION_INJECTION_KEY:Bo,COLLECTION_ITEM_INJECTION_KEY:Ko}=he("Dropdown"),Q=Symbol("elDropdown"),{ButtonGroup:Lo}=me,Do=A({name:"ElDropdown",components:{ElButton:me,ElButtonGroup:Lo,ElScrollbar:ze,ElDropdownCollection:ko,ElTooltip:Ae,ElRovingFocusGroup:yo,ElOnlyChild:Ge,ElIcon:ve,ArrowDown:qe},props:Fo,emits:["visible-change","click","command"],setup(e,{emit:o}){const r=Ie(),t=oe("dropdown"),{t:d}=Pe(),i=E(),c=E(),s=E(null),p=E(null),v=E(null),m=E(null),f=E(!1),I=[$.enter,$.space,$.down],n=C(()=>({maxHeight:Be(e.maxHeight)})),u=C(()=>[t.m(T.value)]),a=C(()=>We(e.trigger)),g=fe().value,D=C(()=>e.id||g);_e([i,a],([l,N],[Y])=>{var se,ae,ie;(se=Y==null?void 0:Y.$el)!=null&&se.removeEventListener&&Y.$el.removeEventListener("pointerenter",B),(ae=l==null?void 0:l.$el)!=null&&ae.removeEventListener&&l.$el.removeEventListener("pointerenter",B),(ie=l==null?void 0:l.$el)!=null&&ie.addEventListener&&N.includes("hover")&&l.$el.addEventListener("pointerenter",B)},{immediate:!0}),be(()=>{var l,N;(N=(l=i.value)==null?void 0:l.$el)!=null&&N.removeEventListener&&i.value.$el.removeEventListener("pointerenter",B)});function R(){G()}function G(){var l;(l=s.value)==null||l.onClose()}function w(){var l;(l=s.value)==null||l.onOpen()}const T=Ke();function O(...l){o("command",...l)}function B(){var l,N;(N=(l=i.value)==null?void 0:l.$el)==null||N.focus()}function z(){}function F(){const l=y(p);a.value.includes("hover")&&(l==null||l.focus()),m.value=null}function re(l){m.value=l}function q(l){f.value||(l.preventDefault(),l.stopImmediatePropagation())}function J(){o("visible-change",!0)}function Se(l){(l==null?void 0:l.type)==="keydown"&&p.value.focus()}function Re(){o("visible-change",!1)}return U(Q,{contentRef:p,role:C(()=>e.role),triggerId:D,isUsingKeyboard:f,onItemEnter:z,onItemLeave:F}),U("elDropdown",{instance:r,dropdownSize:T,handleClick:R,commandHandler:O,trigger:V(e,"trigger"),hideOnClick:V(e,"hideOnClick")}),{t:d,ns:t,scrollbar:v,wrapStyle:n,dropdownTriggerKls:u,dropdownSize:T,triggerId:D,triggerKeys:I,currentTabId:m,handleCurrentTabIdChange:re,handlerMainButtonClick:l=>{o("click",l)},handleEntryFocus:q,handleClose:G,handleOpen:w,handleBeforeShowTooltip:J,handleShowTooltip:Se,handleBeforeHideTooltip:Re,onFocusAfterTrapped:l=>{var N,Y;l.preventDefault(),(Y=(N=p.value)==null?void 0:N.focus)==null||Y.call(N,{preventScroll:!0})},popperRef:s,contentRef:p,triggeringElementRef:i,referenceElementRef:c}}});function Mo(e,o,r,t,d,i){var c;const s=_("el-dropdown-collection"),p=_("el-roving-focus-group"),v=_("el-scrollbar"),m=_("el-only-child"),f=_("el-tooltip"),I=_("el-button"),n=_("arrow-down"),u=_("el-icon"),a=_("el-button-group");return L(),W("div",{class:Z([e.ns.b(),e.ns.is("disabled",e.disabled)])},[S(f,{ref:"popperRef",role:e.role,effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,"hide-after":e.trigger==="hover"?e.hideTimeout:0,"manual-mode":!0,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"reference-element":(c=e.referenceElementRef)==null?void 0:c.$el,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-after":e.trigger==="hover"?e.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":e.triggeringElementRef,"virtual-triggering":e.splitButton,disabled:e.disabled,transition:`${e.ns.namespace.value}-zoom-in-top`,teleported:e.teleported,pure:"",persistent:"",onBeforeShow:e.handleBeforeShowTooltip,onShow:e.handleShowTooltip,onBeforeHide:e.handleBeforeHideTooltip},Xe({content:b(()=>[S(v,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:b(()=>[S(p,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange,onEntryFocus:e.handleEntryFocus},{default:b(()=>[S(s,null,{default:b(()=>[P(e.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[e.splitButton?void 0:{name:"default",fn:b(()=>[S(m,{id:e.triggerId,ref:"triggeringElementRef",role:"button",tabindex:e.tabindex},{default:b(()=>[P(e.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","onBeforeShow","onShow","onBeforeHide"]),e.splitButton?(L(),H(a,{key:0},{default:b(()=>[S(I,j({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:b(()=>[P(e.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),S(I,j({id:e.triggerId,ref:"triggeringElementRef"},e.buttonProps,{role:"button",size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t("el.dropdown.toggleDropdown")}),{default:b(()=>[S(u,{class:Z(e.ns.e("icon"))},{default:b(()=>[S(n)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):x("v-if",!0)],2)}var Ao=M(Do,[["render",Mo],["__file","dropdown.vue"]]);const Go=A({name:"DropdownItemImpl",components:{ElIcon:ve},props:ye,emits:["pointermove","pointerleave","click","clickimpl"],setup(e,{emit:o}){const r=oe("dropdown"),{role:t}=h(Q,void 0),{collectionItemRef:d}=h(Ko,void 0),{collectionItemRef:i}=h(fo,void 0),{rovingFocusGroupItemRef:c,tabIndex:s,handleFocus:p,handleKeydown:v,handleMousedown:m}=h(Ce,void 0),f=we(d,i,c),I=C(()=>t.value==="menu"?"menuitem":t.value==="navigation"?"link":"button"),n=k(u=>{const{code:a}=u;if(a===$.enter||a===$.space)return u.preventDefault(),u.stopImmediatePropagation(),o("clickimpl",u),!0},v);return{ns:r,itemRef:f,dataset:{[Ee]:""},role:I,tabIndex:s,handleFocus:p,handleKeydown:n,handleMousedown:m}}});function zo(e,o,r,t,d,i){const c=_("el-icon");return L(),W(xe,null,[e.divided?(L(),W("li",j({key:0,role:"separator",class:e.ns.bem("menu","item","divided")},e.$attrs),null,16)):x("v-if",!0),Qe("li",j({ref:e.itemRef},{...e.dataset,...e.$attrs},{"aria-disabled":e.disabled,class:[e.ns.be("menu","item"),e.ns.is("disabled",e.disabled)],tabindex:e.tabIndex,role:e.role,onClick:s=>e.$emit("clickimpl",s),onFocus:e.handleFocus,onKeydown:ee(e.handleKeydown,["self"]),onMousedown:e.handleMousedown,onPointermove:s=>e.$emit("pointermove",s),onPointerleave:s=>e.$emit("pointerleave",s)}),[e.icon?(L(),H(c,{key:0},{default:b(()=>[(L(),H(Ze(e.icon)))]),_:1})):x("v-if",!0),P(e.$slots,"default")],16,["aria-disabled","tabindex","role","onClick","onFocus","onKeydown","onMousedown","onPointermove","onPointerleave"])],64)}var Yo=M(Go,[["render",zo],["__file","dropdown-item-impl.vue"]]);const $e=()=>{const e=h("elDropdown",{}),o=C(()=>e==null?void 0:e.dropdownSize);return{elDropdown:e,_elDropdownSize:o}},Uo=A({name:"ElDropdownItem",components:{ElDropdownCollectionItem:Po,ElRovingFocusItem:Oo,ElDropdownItemImpl:Yo},inheritAttrs:!1,props:ye,emits:["pointermove","pointerleave","click"],setup(e,{emit:o,attrs:r}){const{elDropdown:t}=$e(),d=Ie(),i=E(null),c=C(()=>{var n,u;return(u=(n=y(i))==null?void 0:n.textContent)!=null?u:""}),{onItemEnter:s,onItemLeave:p}=h(Q,void 0),v=k(n=>(o("pointermove",n),n.defaultPrevented),ce(n=>{if(e.disabled){p(n);return}const u=n.currentTarget;u===document.activeElement||u.contains(document.activeElement)||(s(n),n.defaultPrevented||u==null||u.focus())})),m=k(n=>(o("pointerleave",n),n.defaultPrevented),ce(p)),f=k(n=>{if(!e.disabled)return o("click",n),n.type!=="keydown"&&n.defaultPrevented},n=>{var u,a,g;if(e.disabled){n.stopImmediatePropagation();return}(u=t==null?void 0:t.hideOnClick)!=null&&u.value&&((a=t.handleClick)==null||a.call(t)),(g=t.commandHandler)==null||g.call(t,e.command,d,n)}),I=C(()=>({...e,...r}));return{handleClick:f,handlePointerMove:v,handlePointerLeave:m,textContent:c,propsAndAttrs:I}}});function Ho(e,o,r,t,d,i){var c;const s=_("el-dropdown-item-impl"),p=_("el-roving-focus-item"),v=_("el-dropdown-collection-item");return L(),H(v,{disabled:e.disabled,"text-value":(c=e.textValue)!=null?c:e.textContent},{default:b(()=>[S(p,{focusable:!e.disabled},{default:b(()=>[S(s,j(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),{default:b(()=>[P(e.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var Oe=M(Uo,[["render",Ho],["__file","dropdown-item.vue"]]);const Jo=A({name:"ElDropdownMenu",props:So,setup(e){const o=oe("dropdown"),{_elDropdownSize:r}=$e(),t=r.value,{focusTrapRef:d,onKeydown:i}=h(Le,void 0),{contentRef:c,role:s,triggerId:p}=h(Q,void 0),{collectionRef:v,getItems:m}=h(Bo,void 0),{rovingFocusGroupRef:f,rovingFocusGroupRootStyle:I,tabIndex:n,onBlur:u,onFocus:a,onMousedown:g}=h(te,void 0),{collectionRef:D}=h(ne,void 0),R=C(()=>[o.b("menu"),o.bm("menu",t==null?void 0:t.value)]),G=we(c,v,d,f,D),w=k(O=>{var B;(B=e.onKeydown)==null||B.call(e,O)},O=>{const{currentTarget:B,code:z,target:F}=O;if(B.contains(F),$.tab===z&&O.stopImmediatePropagation(),O.preventDefault(),F!==y(c)||!No.includes(z))return;const q=m().filter(J=>!J.disabled).map(J=>J.ref);Te.includes(z)&&q.reverse(),le(q)});return{size:t,rovingFocusGroupRootStyle:I,tabIndex:n,dropdownKls:R,role:s,triggerId:p,dropdownListWrapperRef:G,handleKeydown:O=>{w(O),i(O)},onBlur:u,onFocus:a,onMousedown:g}}});function Vo(e,o,r,t,d,i){return L(),W("ul",{ref:e.dropdownListWrapperRef,class:Z(e.dropdownKls),style:eo(e.rovingFocusGroupRootStyle),tabindex:-1,role:e.role,"aria-labelledby":e.triggerId,onBlur:e.onBlur,onFocus:e.onFocus,onKeydown:ee(e.handleKeydown,["self"]),onMousedown:ee(e.onMousedown,["self"])},[P(e.$slots,"default")],46,["role","aria-labelledby","onBlur","onFocus","onKeydown","onMousedown"])}var Fe=M(Jo,[["render",Vo],["__file","dropdown-menu.vue"]]);const en=De(Ao,{DropdownItem:Oe,DropdownMenu:Fe}),on=ge(Oe),nn=ge(Fe),tn=e=>oo(no,e);export{nn as E,en as a,on as b,Fo as d,tn as u};
