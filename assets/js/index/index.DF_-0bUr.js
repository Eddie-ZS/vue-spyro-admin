import{c as $,m as W,h as I,t as Q,n as x,v as Z,f as ee,z as te,i as C,j as D,$ as ae,w as le}from"../index-CBSi0O3n.js";import{p as P,y as V,C as i,D as L,ad as se,aj as K,r as R,ar as A,as as F,ax as oe,aq as M,ap as k,R as y,aw as O,ay as re,az as ne,s as G,I as q,G as ie,F as U,q as X,ag as ce,aA as ue,bx as ve,z as fe,b2 as me,ah as de,at as pe,ao as he,$ as be}from"../.pnpm/.pnpm.BAJQU3fl.js";const H=4,ye={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},ge=({move:g,size:c,bar:r})=>({[r.size]:c,transform:`translate${r.axis}(${g}%)`}),j=Symbol("scrollbarContextKey"),we=$({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),Se="Thumb",ze=P({__name:"thumb",props:we,setup(g){const c=g,r=V(j),l=I("scrollbar");r||Q(Se,"can not inject scrollbar context");const n=i(),u=i(),m=i({}),d=i(!1);let f=!1,p=!1,a=Z?document.onselectstart:null;const t=L(()=>ye[c.vertical?"vertical":"horizontal"]),s=L(()=>ge({size:c.size,move:c.move,bar:t.value})),v=L(()=>n.value[t.value.offset]**2/r.wrapElement[t.value.scrollSize]/c.ratio/u.value[t.value.offset]),h=o=>{var _;if(o.stopPropagation(),o.ctrlKey||[1,2].includes(o.button))return;(_=window.getSelection())==null||_.removeAllRanges(),S(o);const T=o.currentTarget;T&&(m.value[t.value.axis]=T[t.value.offset]-(o[t.value.client]-T.getBoundingClientRect()[t.value.direction]))},E=o=>{if(!u.value||!n.value||!r.wrapElement)return;const _=Math.abs(o.target.getBoundingClientRect()[t.value.direction]-o[t.value.client]),T=u.value[t.value.offset]/2,B=(_-T)*100*v.value/n.value[t.value.offset];r.wrapElement[t.value.scroll]=B*r.wrapElement[t.value.scrollSize]/100},S=o=>{o.stopImmediatePropagation(),f=!0,document.addEventListener("mousemove",w),document.addEventListener("mouseup",b),a=document.onselectstart,document.onselectstart=()=>!1},w=o=>{if(!n.value||!u.value||f===!1)return;const _=m.value[t.value.axis];if(!_)return;const T=(n.value.getBoundingClientRect()[t.value.direction]-o[t.value.client])*-1,B=u.value[t.value.offset]-_,J=(T-B)*100*v.value/n.value[t.value.offset];r.wrapElement[t.value.scroll]=J*r.wrapElement[t.value.scrollSize]/100},b=()=>{f=!1,m.value[t.value.axis]=0,document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",b),e(),p&&(d.value=!1)},N=()=>{p=!1,d.value=!!c.size},z=()=>{p=!0,d.value=f};se(()=>{e(),document.removeEventListener("mouseup",b)});const e=()=>{document.onselectstart!==a&&(document.onselectstart=a)};return x(K(r,"scrollbarElement"),"mousemove",N),x(K(r,"scrollbarElement"),"mouseleave",z),(o,_)=>(R(),A(ne,{name:y(l).b("fade"),persisted:""},{default:F(()=>[oe(M("div",{ref_key:"instance",ref:n,class:k([y(l).e("bar"),y(l).is(y(t).key)]),onMousedown:E},[M("div",{ref_key:"thumb",ref:u,class:k(y(l).e("thumb")),style:O(y(s)),onMousedown:h},null,38)],34),[[re,o.always||d.value]])]),_:1},8,["name"]))}});var Y=W(ze,[["__file","thumb.vue"]]);const _e=$({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),Ee=P({__name:"bar",props:_e,setup(g,{expose:c}){const r=g,l=V(j),n=i(0),u=i(0),m=i(""),d=i(""),f=i(1),p=i(1);return c({handleScroll:s=>{if(s){const v=s.offsetHeight-H,h=s.offsetWidth-H;u.value=s.scrollTop*100/v*f.value,n.value=s.scrollLeft*100/h*p.value}},update:()=>{const s=l==null?void 0:l.wrapElement;if(!s)return;const v=s.offsetHeight-H,h=s.offsetWidth-H,E=v**2/s.scrollHeight,S=h**2/s.scrollWidth,w=Math.max(E,r.minSize),b=Math.max(S,r.minSize);f.value=E/(v-E)/(w/(v-w)),p.value=S/(h-S)/(b/(h-b)),d.value=w+H<v?`${w}px`:"",m.value=b+H<h?`${b}px`:""}}),(s,v)=>(R(),G(ie,null,[q(Y,{move:n.value,ratio:p.value,size:m.value,always:s.always},null,8,["move","ratio","size","always"]),q(Y,{move:u.value,ratio:f.value,size:d.value,vertical:"",always:s.always},null,8,["move","ratio","size","always"])],64))}});var Te=W(Ee,[["__file","bar.vue"]]);const He=$({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:ee([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},id:String,role:String,...te(["ariaLabel","ariaOrientation"])}),Le={scroll:({scrollTop:g,scrollLeft:c})=>[g,c].every(C)},Ce="ElScrollbar",Re=P({name:Ce}),ke=P({...Re,props:He,emits:Le,setup(g,{expose:c,emit:r}){const l=g,n=I("scrollbar");let u,m,d=0,f=0;const p=i(),a=i(),t=i(),s=i(),v=L(()=>{const e={};return l.height&&(e.height=D(l.height)),l.maxHeight&&(e.maxHeight=D(l.maxHeight)),[l.wrapStyle,e]}),h=L(()=>[l.wrapClass,n.e("wrap"),{[n.em("wrap","hidden-default")]:!l.native}]),E=L(()=>[n.e("view"),l.viewClass]),S=()=>{var e;a.value&&((e=s.value)==null||e.handleScroll(a.value),d=a.value.scrollTop,f=a.value.scrollLeft,r("scroll",{scrollTop:a.value.scrollTop,scrollLeft:a.value.scrollLeft}))};function w(e,o){be(e)?a.value.scrollTo(e):C(e)&&C(o)&&a.value.scrollTo(e,o)}const b=e=>{C(e)&&(a.value.scrollTop=e)},N=e=>{C(e)&&(a.value.scrollLeft=e)},z=()=>{var e;(e=s.value)==null||e.update()};return U(()=>l.noresize,e=>{e?(u==null||u(),m==null||m()):({stop:u}=ae(t,z),m=x("resize",z))},{immediate:!0}),U(()=>[l.maxHeight,l.height],()=>{l.native||X(()=>{var e;z(),a.value&&((e=s.value)==null||e.handleScroll(a.value))})}),ce(j,ue({scrollbarElement:p,wrapElement:a})),ve(()=>{a.value.scrollTop=d,a.value.scrollLeft=f}),fe(()=>{l.native||X(()=>{z()})}),me(()=>z()),c({wrapRef:a,update:z,scrollTo:w,setScrollTop:b,setScrollLeft:N,handleScroll:S}),(e,o)=>(R(),G("div",{ref_key:"scrollbarRef",ref:p,class:k(y(n).b())},[M("div",{ref_key:"wrapRef",ref:a,class:k(y(h)),style:O(y(v)),onScroll:S},[(R(),A(pe(e.tag),{id:e.id,ref_key:"resizeRef",ref:t,class:k(y(E)),style:O(e.viewStyle),role:e.role,"aria-label":e.ariaLabel,"aria-orientation":e.ariaOrientation},{default:F(()=>[de(e.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],38),e.native?he("v-if",!0):(R(),A(Te,{key:0,ref_key:"barRef",ref:s,always:e.always,"min-size":e.minSize},null,8,["always","min-size"]))],2))}});var Pe=W(ke,[["__file","scrollbar.vue"]]);const xe=le(Pe);export{xe as E};
