import{b as M,u as E,E as D}from"./index.DbjvkKX1.js";import{c as j,J as H,h as T,j as G,m as J,bb as K,w as Q}from"../index-BuEOIHYu.js";import{d as B}from"../useIcon/useIcon.yA8JmBpg.js";import{p as V,a3 as w,H as S,E as y,r as P,am as X,an as x,s as Y,ak as Z,ar as q,ai as L,aa as z,aF as _,ab as ee,I as $,J as te,K as ne,C as re}from"../.pnpm/.pnpm.DOMSuxsb.js";import{t as F,n as oe,a as A,i as W,b as O,c as se,d as ae,e as le}from"./index.CSefp4jg.js";const ie=j({trigger:M.trigger,placement:B.placement,disabled:M.disabled,visible:E.visible,transition:E.transition,popperOptions:B.popperOptions,tabindex:B.tabindex,content:E.content,popperStyle:E.popperStyle,popperClass:E.popperClass,enterable:{...E.enterable,default:!0},effect:{...E.effect,default:"light"},teleported:E.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),ue={"update:visible":o=>H(o),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},ce="onUpdate:visible",pe=V({name:"ElPopover"}),fe=V({...pe,props:ie,emits:ue,setup(o,{expose:r,emit:e}){const c=o,s=w(()=>c[ce]),l=T("popover"),i=S(),f=w(()=>{var a;return(a=y(i))==null?void 0:a.popperRef}),d=w(()=>[{width:G(c.width)},c.popperStyle]),h=w(()=>[l.b(),c.popperClass,{[l.m("plain")]:!!c.content}]),n=w(()=>c.transition===`${l.namespace.value}-fade-in-linear`),t=()=>{var a;(a=i.value)==null||a.hide()},p=()=>{e("before-enter")},v=()=>{e("before-leave")},m=()=>{e("after-enter")},g=()=>{e("update:visible",!1),e("after-leave")};return r({popperRef:f,hide:t}),(a,u)=>(P(),X(y(D),ee({ref_key:"tooltipRef",ref:i},a.$attrs,{trigger:a.trigger,placement:a.placement,disabled:a.disabled,visible:a.visible,transition:a.transition,"popper-options":a.popperOptions,tabindex:a.tabindex,content:a.content,offset:a.offset,"show-after":a.showAfter,"hide-after":a.hideAfter,"auto-close":a.autoClose,"show-arrow":a.showArrow,"aria-label":a.title,effect:a.effect,enterable:a.enterable,"popper-class":y(h),"popper-style":y(d),teleported:a.teleported,persistent:a.persistent,"gpu-acceleration":y(n),"onUpdate:visible":y(s),onBeforeShow:p,onBeforeHide:v,onShow:m,onHide:g}),{content:x(()=>[a.title?(P(),Y("div",{key:0,class:Z(y(l).e("title")),role:"title"},q(a.title),3)):L("v-if",!0),z(a.$slots,"default",{},()=>[_(q(a.content),1)])]),default:x(()=>[a.$slots.reference?z(a.$slots,"reference",{key:0}):L("v-if",!0)]),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});var de=J(fe,[["__file","popover.vue"]]);const I=(o,r)=>{const e=r.arg||r.value,c=e==null?void 0:e.popperRef;c&&(c.triggerRef=o)};var ve={mounted(o,r){I(o,r)},updated(o,r){I(o,r)}};const me="popover",he=K(ve,me),ke=Q(de,{directive:he});function b(o){var r;const e=F(o);return(r=e==null?void 0:e.$el)!=null?r:e}const C=W?window:void 0,we=W?window.document:void 0;function N(...o){let r,e,c,s;if(typeof o[0]=="string"||Array.isArray(o[0])?([e,c,s]=o,r=C):[r,e,c,s]=o,!r)return A;Array.isArray(e)||(e=[e]),Array.isArray(c)||(c=[c]);const l=[],i=()=>{l.forEach(n=>n()),l.length=0},f=(n,t,p,v)=>(n.addEventListener(t,p,v),()=>n.removeEventListener(t,p,v)),d=$(()=>[b(r),F(s)],([n,t])=>{if(i(),!n)return;const p=se(t)?{...t}:t;l.push(...e.flatMap(v=>c.map(m=>f(n,v,m,p))))},{immediate:!0,flush:"post"}),h=()=>{d(),i()};return O(h),h}function be(){const o=S(!1),r=te();return r&&ne(()=>{o.value=!0},r),o}function R(o){const r=be();return w(()=>(r.value,!!o()))}function k(o,r={}){const{window:e=C}=r,c=R(()=>e&&"matchMedia"in e&&typeof e.matchMedia=="function");let s;const l=S(!1),i=h=>{l.value=h.matches},f=()=>{s&&("removeEventListener"in s?s.removeEventListener("change",i):s.removeListener(i))},d=re(()=>{c.value&&(f(),s=e.matchMedia(F(o)),"addEventListener"in s?s.addEventListener("change",i):s.addListener(i),l.value=s.matches)});return O(()=>{d(),f(),s=void 0}),l}const Oe={sm:640,md:768,lg:1024,xl:1280,"2xl":1536};function Ae(o,r={}){function e(n,t){let p=F(o[F(n)]);return t!=null&&(p=ae(p,t)),typeof p=="number"&&(p=`${p}px`),p}const{window:c=C,strategy:s="min-width"}=r;function l(n){return c?c.matchMedia(n).matches:!1}const i=n=>k(()=>`(min-width: ${e(n)})`,r),f=n=>k(()=>`(max-width: ${e(n)})`,r),d=Object.keys(o).reduce((n,t)=>(Object.defineProperty(n,t,{get:()=>s==="min-width"?i(t):f(t),enumerable:!0,configurable:!0}),n),{});function h(){const n=Object.keys(o).map(t=>[t,i(t)]);return w(()=>n.filter(([,t])=>t.value).map(([t])=>t))}return Object.assign(d,{greaterOrEqual:i,smallerOrEqual:f,greater(n){return k(()=>`(min-width: ${e(n,.1)})`,r)},smaller(n){return k(()=>`(max-width: ${e(n,-.1)})`,r)},between(n,t){return k(()=>`(min-width: ${e(n)}) and (max-width: ${e(t,-.1)})`,r)},isGreater(n){return l(`(min-width: ${e(n,.1)})`)},isGreaterOrEqual(n){return l(`(min-width: ${e(n)})`)},isSmaller(n){return l(`(max-width: ${e(n,-.1)})`)},isSmallerOrEqual(n){return l(`(max-width: ${e(n)})`)},isInBetween(n,t){return l(`(min-width: ${e(n)}) and (max-width: ${e(t,-.1)})`)},current:h,active(){const n=h();return w(()=>n.value.length===0?"":n.value.at(-1))}})}function ge(o,r,e={}){const{window:c=C,...s}=e;let l;const i=R(()=>c&&"ResizeObserver"in c),f=()=>{l&&(l.disconnect(),l=void 0)},d=w(()=>{const t=F(o);return Array.isArray(t)?t.map(p=>b(p)):[b(t)]}),h=$(d,t=>{if(f(),i.value&&c){l=new ResizeObserver(r);for(const p of t)p&&l.observe(p,s)}},{immediate:!0,flush:"post"}),n=()=>{f(),h()};return O(n),{isSupported:i,stop:n}}function $e(o,r={width:0,height:0},e={}){const{window:c=C,box:s="content-box"}=e,l=w(()=>{var t,p;return(p=(t=b(o))==null?void 0:t.namespaceURI)==null?void 0:p.includes("svg")}),i=S(r.width),f=S(r.height),{stop:d}=ge(o,([t])=>{const p=s==="border-box"?t.borderBoxSize:s==="content-box"?t.contentBoxSize:t.devicePixelContentBoxSize;if(c&&l.value){const v=b(o);if(v){const m=v.getBoundingClientRect();i.value=m.width,f.value=m.height}}else if(p){const v=Array.isArray(p)?p:[p];i.value=v.reduce((m,{inlineSize:g})=>m+g,0),f.value=v.reduce((m,{blockSize:g})=>m+g,0)}else i.value=t.contentRect.width,f.value=t.contentRect.height},e);le(()=>{const t=b(o);t&&(i.value="offsetWidth"in t?t.offsetWidth:r.width,f.value="offsetHeight"in t?t.offsetHeight:r.height)});const h=$(()=>b(o),t=>{i.value=t?r.width:0,f.value=t?r.height:0});function n(){d(),h()}return{width:i,height:f,stop:n}}function Re(o,r,e={}){const{root:c,rootMargin:s="0px",threshold:l=0,window:i=C,immediate:f=!0}=e,d=R(()=>i&&"IntersectionObserver"in i),h=w(()=>{const m=F(o);return(Array.isArray(m)?m:[m]).map(b).filter(oe)});let n=A;const t=S(f),p=d.value?$(()=>[h.value,b(c),t.value],([m,g])=>{if(n(),!t.value||!m.length)return;const a=new IntersectionObserver(r,{root:b(g),rootMargin:s,threshold:l});m.forEach(u=>u&&a.observe(u)),n=()=>{a.disconnect(),n=A}},{immediate:f,flush:"post"}):A,v=()=>{n(),p(),t.value=!1};return O(v),{isSupported:d,isActive:t,pause(){n(),t.value=!1},resume(){t.value=!0},stop:v}}const U=["fullscreenchange","webkitfullscreenchange","webkitendfullscreen","mozfullscreenchange","MSFullscreenChange"];function Be(o,r={}){const{document:e=we,autoExit:c=!1}=r,s=w(()=>{var u;return(u=b(o))!=null?u:e==null?void 0:e.querySelector("html")}),l=S(!1),i=w(()=>["requestFullscreen","webkitRequestFullscreen","webkitEnterFullscreen","webkitEnterFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"].find(u=>e&&u in e||s.value&&u in s.value)),f=w(()=>["exitFullscreen","webkitExitFullscreen","webkitExitFullScreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"].find(u=>e&&u in e||s.value&&u in s.value)),d=w(()=>["fullScreen","webkitIsFullScreen","webkitDisplayingFullscreen","mozFullScreen","msFullscreenElement"].find(u=>e&&u in e||s.value&&u in s.value)),h=["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].find(u=>e&&u in e),n=R(()=>s.value&&e&&i.value!==void 0&&f.value!==void 0&&d.value!==void 0),t=()=>h?(e==null?void 0:e[h])===s.value:!1,p=()=>{if(d.value){if(e&&e[d.value]!=null)return e[d.value];{const u=s.value;if((u==null?void 0:u[d.value])!=null)return!!u[d.value]}}return!1};async function v(){if(!(!n.value||!l.value)){if(f.value)if((e==null?void 0:e[f.value])!=null)await e[f.value]();else{const u=s.value;(u==null?void 0:u[f.value])!=null&&await u[f.value]()}l.value=!1}}async function m(){if(!n.value||l.value)return;p()&&await v();const u=s.value;i.value&&(u==null?void 0:u[i.value])!=null&&(await u[i.value](),l.value=!0)}async function g(){await(l.value?v():m())}const a=()=>{const u=p();(!u||u&&t())&&(l.value=u)};return N(e,U,a,!1),N(()=>b(s),U,a,!1),c&&O(v),{isSupported:n,isFullscreen:l,enter:m,exit:v,toggle:g}}export{ke as E,$e as a,Be as b,ge as c,Ae as d,Oe as e,Re as f,N as u};
