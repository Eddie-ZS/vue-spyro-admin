import{aA as m,p as a,aH as i,x as y,f as V,ac as h}from"../.pnpm/.pnpm.BjW_VwSY.js";import{z as d,A as c}from"../index-DUoOxhq0.js";import{_ as E}from"../Icon.vue_vue_type_script_lang/Icon.vue_vue_type_script_lang.oLLe5qt2.js";import{E as p}from"../index/index.D6yWBEyC.js";import{E as $}from"../index/index.DJJQn0uj.js";import{E as q,a as x}from"../index/index.DL8z5DVt.js";import"../index/index.BxMH7Umi.js";import"../strings/strings.DmmdHpbc.js";function k(o){return typeof o=="function"||Object.prototype.toString.call(o)==="[object Object]"&&!h(o)}const _=()=>{const o=m([{dictLabel:"男",dictValue:"male"},{dictLabel:"女",dictValue:"female"}]),f={username:"",nickname:"",sex:"female",phone:"",email:""},n=m({columns:[{type:"index",label:"序号",width:"55"},{prop:"username",label:"用户名",overflowConfig:{initiate:!0},renderer:({row:e,$index:l,column:r})=>a(p,{prop:`data[${l}][${r.property}]`,rules:[{required:e[`${r.property}Required`],message:"请输入用户名",trigger:"blur"}]},{default:()=>[a(d,{modelValue:e.username,"onUpdate:modelValue":t=>e.username=t},null)]})},{prop:"nickname",label:"昵称",renderer:({row:e,$index:l,column:r})=>a(p,{prop:`data[${l}][${r.property}]`,rules:[{required:e[`${r.property}Required`],message:"请输入昵称",trigger:"blur"}]},{default:()=>[a(d,{modelValue:e.nickname,"onUpdate:modelValue":t=>e.nickname=t},null)]})},{prop:"sex",label:"性别",headerRenderer:({column:e})=>a("div",{class:"flex-center"},[a("span",{class:"text-red"},[i("*")]),a("span",null,[e.label]),a($,{effect:"dark",content:"根据条件判断, 性别为女 手机号必填，性别为男，不做要求",placement:"top"},{default:()=>[a(E,{name:"ep:info-filled",class:"ml-1"},null)]})]),renderer:({row:e,$index:l,column:r})=>{let t;return a(p,{prop:`data[${l}][${r.property}]`,rules:[{required:e[`${r.property}Required`],message:"请选择性别",trigger:"change"}]},{default:()=>[a(q,{modelValue:e.sex,"onUpdate:modelValue":u=>e.sex=u,clearable:!0,onChange:u=>g(e,u)},k(t=o.map(u=>a(x,{key:u.dictValue,label:u.dictLabel,value:u.dictValue},null)))?t:{default:()=>[t]})]})}},{prop:"phone",label:"手机号",renderer:({row:e,$index:l,column:r})=>a(p,{prop:`data[${l}][${r.property}]`,rules:[{required:e[`${r.property}Required`],message:"请输入手机号",trigger:"blur"}]},{default:()=>[a(d,{modelValue:e.phone,"onUpdate:modelValue":t=>e.phone=t},null)]})},{prop:"email",label:"邮箱",renderer:({row:e,$index:l,column:r})=>a(p,{prop:`data[${l}][${r.property}]`,rules:[{required:e[`${r.property}Required`],message:"请输入邮箱",trigger:"blur"}]},{default:()=>[a(d,{modelValue:e.email,"onUpdate:modelValue":t=>e.email=t},null)]})},{prop:"operation",label:"操作",renderer:({$index:e})=>a("span",null,[n.data.length-1===e||n.data.length===1?a(c,{type:"primary",link:!0,onClick:()=>s()},{default:()=>[i("新增")]}):void 0,n.data.length>1?a(c,{type:"primary",link:!0,onClick:()=>b(e)},{default:()=>[i("删除")]}):void 0])}],data:[]}),s=()=>{const e=y.clone(f,!0);Object.keys(e).forEach(l=>{e[`${l}Required`]=!0}),n.data.push(e)},g=(e,l)=>{e.phoneRequired=l==="female"},b=e=>{n.data.splice(e,1)};return V(()=>{s()}),{columnProp:n}};export{_ as useConditionVerifyEdit};
