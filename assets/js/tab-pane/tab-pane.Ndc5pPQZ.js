import{W as ge,b as K,e as J,X as le,t as Q,f as U,V as oe,_ as re,b4 as _e,b5 as Ce,E as D,o as I,U as ie,b6 as ae,i as Ne,b7 as se,w as Te,m as Pe}from"../index-CYl5r2r_.js";import{s as we,a7 as Ee,d as F,g as Z,i as ee,r as T,w as V,E as te,G as ce,H as ue,ak as de,M as B,ar as Se,c as L,o as be,b1 as $e,j as d,b4 as xe,aP as Be,a1 as Oe,ab as ke,ac as Y,b5 as Re,P as ze,ag as Ae,av as Me,a as Ve,as as Fe,at as Le,aj as De}from"../.pnpm/.pnpm.BKF2UWsc.js";import{c as R}from"../strings/strings.B4pr-qrC.js";const Ie=(e,l,b)=>ge(e.subTree).filter(n=>{var u;return Ee(n)&&((u=n.type)==null?void 0:u.name)===l&&!!n.component}).map(n=>n.component.uid).map(n=>b[n]).filter(n=>!!n),Ke=(e,l)=>{const b={},f=we([]);return{children:f,addChild:u=>{b[u.uid]=u,f.value=Ie(e,l,b)},removeChild:u=>{delete b[u],f.value=f.value.filter(v=>v.uid!==u)}}},j=Symbol("tabsRootContextKey"),Ue=K({tabs:{type:J(Array),default:()=>le([])}}),ve="ElTabBar",je=F({name:ve}),He=F({...je,props:Ue,setup(e,{expose:l}){const b=e,f=Z(),t=ee(j);t||Q(ve,"<el-tabs><el-tab-bar /></el-tabs>");const n=U("tabs"),u=T(),v=T(),p=()=>{let y=0,o=0;const i=["top","bottom"].includes(t.props.tabPosition)?"width":"height",m=i==="width"?"x":"y",$=m==="x"?"left":"top";return b.tabs.every(S=>{var A,a;const _=(a=(A=f.parent)==null?void 0:A.refs)==null?void 0:a[`tab-${S.uid}`];if(!_)return!1;if(!S.active)return!0;y=_[`offset${R($)}`],o=_[`client${R(i)}`];const w=window.getComputedStyle(_);return i==="width"&&(o-=Number.parseFloat(w.paddingLeft)+Number.parseFloat(w.paddingRight),y+=Number.parseFloat(w.paddingLeft)),!1}),{[i]:`${o}px`,transform:`translate${R(m)}(${y}px)`}},P=()=>v.value=p();return V(()=>b.tabs,async()=>{await te(),P()},{immediate:!0}),oe(u,()=>P()),l({ref:u,update:P}),(y,o)=>(ce(),ue("div",{ref_key:"barRef",ref:u,class:de([B(n).e("active-bar"),B(n).is(B(t).props.tabPosition)]),style:Se(v.value)},null,6))}});var We=re(He,[["__file","tab-bar.vue"]]);const qe=K({panes:{type:J(Array),default:()=>le([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),Xe={tabClick:(e,l,b)=>b instanceof Event,tabRemove:(e,l)=>l instanceof Event},ne="ElTabNav",Ge=F({name:ne,props:qe,emits:Xe,setup(e,{expose:l,emit:b}){const f=ee(j);f||Q(ne,"<el-tabs><tab-nav /></el-tabs>");const t=U("tabs"),n=_e(),u=Ce(),v=T(),p=T(),P=T(),y=T(),o=T(!1),i=T(0),m=T(!1),$=T(!0),S=L(()=>["top","bottom"].includes(f.props.tabPosition)?"width":"height"),A=L(()=>({transform:`translate${S.value==="width"?"X":"Y"}(-${i.value}px)`})),a=()=>{if(!v.value)return;const r=v.value[`offset${R(S.value)}`],c=i.value;if(!c)return;const s=c>r?c-r:0;i.value=s},_=()=>{if(!v.value||!p.value)return;const r=p.value[`offset${R(S.value)}`],c=v.value[`offset${R(S.value)}`],s=i.value;if(r-s<=c)return;const C=r-s>c*2?s+c:r-c;i.value=C},w=async()=>{const r=p.value;if(!o.value||!P.value||!v.value||!r)return;await te();const c=P.value.querySelector(".is-active");if(!c)return;const s=v.value,C=["top","bottom"].includes(f.props.tabPosition),N=c.getBoundingClientRect(),g=s.getBoundingClientRect(),x=C?r.offsetWidth-g.width:r.offsetHeight-g.height,E=i.value;let h=E;C?(N.left<g.left&&(h=E-(g.left-N.left)),N.right>g.right&&(h=E+N.right-g.right)):(N.top<g.top&&(h=E-(g.top-N.top)),N.bottom>g.bottom&&(h=E+(N.bottom-g.bottom))),h=Math.max(h,0),i.value=Math.min(h,x)},O=()=>{var r;if(!p.value||!v.value)return;e.stretch&&((r=y.value)==null||r.update());const c=p.value[`offset${R(S.value)}`],s=v.value[`offset${R(S.value)}`],C=i.value;s<c?(o.value=o.value||{},o.value.prev=C,o.value.next=C+s<c,c-C<s&&(i.value=c-s)):(o.value=!1,C>0&&(i.value=0))},k=r=>{const c=r.code,{up:s,down:C,left:N,right:g}=I;if(![s,C,N,g].includes(c))return;const x=Array.from(r.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),E=x.indexOf(r.target);let h;c===N||c===s?E===0?h=x.length-1:h=E-1:E<x.length-1?h=E+1:h=0,x[h].focus({preventScroll:!0}),x[h].click(),M()},M=()=>{$.value&&(m.value=!0)},H=()=>m.value=!1;return V(n,r=>{r==="hidden"?$.value=!1:r==="visible"&&setTimeout(()=>$.value=!0,50)}),V(u,r=>{r?setTimeout(()=>$.value=!0,50):$.value=!1}),oe(P,O),be(()=>setTimeout(()=>w(),0)),$e(()=>O()),l({scrollToActiveTab:w,removeFocus:H}),()=>{const r=o.value?[d("span",{class:[t.e("nav-prev"),t.is("disabled",!o.value.prev)],onClick:a},[d(D,null,{default:()=>[d(xe,null,null)]})]),d("span",{class:[t.e("nav-next"),t.is("disabled",!o.value.next)],onClick:_},[d(D,null,{default:()=>[d(Be,null,null)]})])]:null,c=e.panes.map((s,C)=>{var N,g,x,E;const h=s.uid,W=s.props.disabled,q=(g=(N=s.props.name)!=null?N:s.index)!=null?g:`${C}`,X=!W&&(s.isClosable||e.editable);s.index=`${C}`;const pe=X?d(D,{class:"is-icon-close",onClick:z=>b("tabRemove",s,z)},{default:()=>[d(Oe,null,null)]}):null,he=((E=(x=s.slots).label)==null?void 0:E.call(x))||s.props.label,ye=!W&&s.active?0:-1;return d("div",{ref:`tab-${h}`,class:[t.e("item"),t.is(f.props.tabPosition),t.is("active",s.active),t.is("disabled",W),t.is("closable",X),t.is("focus",m.value)],id:`tab-${q}`,key:`tab-${h}`,"aria-controls":`pane-${q}`,role:"tab","aria-selected":s.active,tabindex:ye,onFocus:()=>M(),onBlur:()=>H(),onClick:z=>{H(),b("tabClick",s,q,z)},onKeydown:z=>{X&&(z.code===I.delete||z.code===I.backspace)&&b("tabRemove",s,z)}},[he,pe])});return d("div",{ref:P,class:[t.e("nav-wrap"),t.is("scrollable",!!o.value),t.is(f.props.tabPosition)]},[r,d("div",{class:t.e("nav-scroll"),ref:v},[d("div",{class:[t.e("nav"),t.is(f.props.tabPosition),t.is("stretch",e.stretch&&["top","bottom"].includes(f.props.tabPosition))],ref:p,style:A.value,role:"tablist",onKeydown:k},[e.type?null:d(We,{ref:y,tabs:[...e.panes]},null),c])])])}}}),Ye=K({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:J(Function),default:()=>!0},stretch:Boolean}),G=e=>ze(e)||Ne(e),Je={[ie]:e=>G(e),tabClick:(e,l)=>l instanceof Event,tabChange:e=>G(e),edit:(e,l)=>["remove","add"].includes(l),tabRemove:e=>G(e),tabAdd:()=>!0},Qe=F({name:"ElTabs",props:Ye,emits:Je,setup(e,{emit:l,slots:b,expose:f}){var t;const n=U("tabs"),u=L(()=>["left","right"].includes(e.tabPosition)),{children:v,addChild:p,removeChild:P}=Ke(Z(),"ElTabPane"),y=T(),o=T((t=e.modelValue)!=null?t:"0"),i=async(a,_=!1)=>{var w,O,k;if(!(o.value===a||ae(a)))try{await((w=e.beforeLeave)==null?void 0:w.call(e,a,o.value))!==!1&&(o.value=a,_&&(l(ie,a),l("tabChange",a)),(k=(O=y.value)==null?void 0:O.removeFocus)==null||k.call(O))}catch{}},m=(a,_,w)=>{a.props.disabled||(i(_,!0),l("tabClick",a,w))},$=(a,_)=>{a.props.disabled||ae(a.props.name)||(_.stopPropagation(),l("edit",a.props.name,"remove"),l("tabRemove",a.props.name))},S=()=>{l("edit",void 0,"add"),l("tabAdd")};V(()=>e.modelValue,a=>i(a)),V(o,async()=>{var a;await te(),(a=y.value)==null||a.scrollToActiveTab()}),ke(j,{props:e,currentName:o,registerPane:a=>{v.value.push(a)},sortPane:p,unregisterPane:P}),f({currentName:o});const A=({render:a})=>a();return()=>{const a=b["add-icon"],_=e.editable||e.addable?d("div",{class:[n.e("new-tab"),u.value&&n.e("new-tab-vertical")],tabindex:"0",onClick:S,onKeydown:k=>{k.code===I.enter&&S()}},[a?Y(b,"add-icon"):d(D,{class:n.is("icon-plus")},{default:()=>[d(Re,null,null)]})]):null,w=d("div",{class:[n.e("header"),u.value&&n.e("header-vertical"),n.is(e.tabPosition)]},[d(A,{render:()=>{const k=v.value.some(M=>M.slots.label);return d(Ge,{ref:y,currentName:o.value,editable:e.editable,type:e.type,panes:v.value,stretch:e.stretch,onTabClick:m,onTabRemove:$},{$stable:!k})}},null),_]),O=d("div",{class:n.e("content")},[Y(b,"default")]);return d("div",{class:[n.b(),n.m(e.tabPosition),{[n.m("card")]:e.type==="card",[n.m("border-card")]:e.type==="border-card"}]},[O,w])}}}),Ze=K({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),fe="ElTabPane",et=F({name:fe}),tt=F({...et,props:Ze,setup(e){const l=e,b=Z(),f=Ae(),t=ee(j);t||Q(fe,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const n=U("tab-pane"),u=T(),v=L(()=>l.closable||t.props.closable),p=se(()=>{var m;return t.currentName.value===((m=l.name)!=null?m:u.value)}),P=T(p.value),y=L(()=>{var m;return(m=l.name)!=null?m:u.value}),o=se(()=>!l.lazy||P.value||p.value);V(p,m=>{m&&(P.value=!0)});const i=Me({uid:b.uid,slots:f,props:l,paneName:y,active:p,index:u,isClosable:v});return t.registerPane(i),be(()=>{t.sortPane(i)}),Ve(()=>{t.unregisterPane(i.uid)}),(m,$)=>B(o)?Fe((ce(),ue("div",{key:0,id:`pane-${B(y)}`,class:de(B(n).b()),role:"tabpanel","aria-hidden":!B(p),"aria-labelledby":`tab-${B(y)}`},[Y(m.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[Le,B(p)]]):De("v-if",!0)}});var me=re(tt,[["__file","tab-pane.vue"]]);const lt=Te(Qe,{TabPane:me}),ot=Pe(me);export{lt as E,ot as a};
