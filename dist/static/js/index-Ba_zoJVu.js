var j=Object.defineProperty,G=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var U=(s,e,o)=>e in s?j(s,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[e]=o,$=(s,e)=>{for(var o in e||(e={}))Q.call(e,o)&&U(s,o,e[o]);if(V)for(var o of V(e))ee.call(e,o)&&U(s,o,e[o]);return s},A=(s,e)=>G(s,H(e));var b=(s,e,o)=>new Promise((v,m)=>{var d=u=>{try{f(o.next(u))}catch(g){m(g)}},y=u=>{try{f(o.throw(u))}catch(g){m(g)}},f=u=>u.done?v(u.value):Promise.resolve(u.value).then(d,y);f((o=o.apply(s,e)).next())});import{K as D,z as S,W as _,T as a,a3 as te,Y as i,X as r,Z as F,a4 as ae,C as h,_ as oe,P as le,a5 as ne,$ as R,a6 as se,J as n,R as c,a7 as B,a8 as ie,a1 as re,a2 as ue}from"./.pnpm-D59sYBvj.js";import{_ as pe}from"./SoTable.vue_vue_type_script_setup_true_lang-qrQb5wIx.js";import{_ as ce}from"./SoCard-D_n_23RH.js";import{u as de}from"./useTable-sBuL47Bf.js";import{g as fe}from"./index-DvL1AnUh.js";import"./Icon.vue_vue_type_script_lang-EAei3ndZ.js";import"./useIcon-CCOGsOky.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-vltj-xWI.js";const ge={class:"h-full flex-col gap-4"},me={class:"mt-3"},be=D({name:"UseTable"}),Te=D(A($({},be),{setup(s){const e=S(!0),o=_([{dictLabel:"男",dictValue:"male"},{dictLabel:"女",dictValue:"female"}]),v=_([{dictLabel:"正常",dictValue:0},{dictLabel:"禁用",dictValue:1}]),m=_([{type:"selection",label:"勾选",width:"55"},{type:"expand",label:"展开",width:"55",renderer:({row:l})=>a("div",{class:"block px-2"},[a(te,{type:"success"},{default:()=>[i("tsx渲染："),JSON.stringify(l)]})])},{type:"sortable",label:"排序",width:80},{type:"index",label:"序号",width:"55"},{prop:"username",label:"用户名",overflowConfig:{initiate:!0}},{prop:"nickname",label:"昵称"},{prop:"sex",label:"性别",dictConfig:{options:()=>o}},{prop:"phone",label:"手机号"},{prop:"email",label:"邮箱"},{prop:"status",label:"状态",tagConfig:{initiate:!0},dictConfig:{options:()=>v}},{prop:"operation",label:"操作",renderer:()=>a(F,null,[a(r,{type:"primary",link:!0,onClick:z},{default:()=>[i("修改")]}),a(r,{type:"primary",link:!0,onClick:L},{default:()=>[i("删除")]})])}]),d=_({pageNum:1,pageSize:10}),{tableState:y,tableMethods:f,tableMount:u}=de({fetchApi:()=>b(this,null,function*(){const{data:l,total:t=0}=yield fe(d);return{data:l,total:t}})}),{loading:g,data:I}=ae(y),{setProps:k,addColumn:x,delColumn:E,getElTableInstance:T,refresh:O}=f,z=()=>{h.success("仅供预览展示")},L=()=>{h.success("仅供预览展示")},M=l=>{k({pagination:l})},N=l=>{l?x({type:"selection",width:"55",label:"勾选"},0):E("selection")};let w=S(!1);const K=()=>b(this,null,function*(){w.value=!w.value;const l=yield T();I.value.forEach(t=>{l==null||l.toggleRowExpansion(t,w.value)})}),J=()=>b(this,null,function*(){const l=yield T();l==null||l.toggleAllSelection()});let C=S(!0);const X=()=>{C.value=!C.value,C.value?x({prop:"operation",label:"操作",renderer:()=>a(F,null,[a(r,{type:"primary",link:!0,onClick:z},{default:()=>[i("修改")]}),a(r,{type:"primary",link:!0,onClick:L},{default:()=>[i("删除")]})])}):E("operation")},q=({newIndex:l,oldIndex:t})=>{h.success("拖拽排序成功")};return oe(()=>{k({rowKey:"userId",columnList:m})}),(l,t)=>{const W=re,P=ce,Y=pe,Z=ue;return le(),ne("div",ge,[R(a(P,{title:"useTable 操作"},{default:c(()=>[B("div",null,[a(W,{closable:!1,title:"基于基础表格封装useTable函数的高级用法",type:"info",description:"采用hook函数式搭配TSX语法的方式进行使用，配置高度灵活，表格都默认设置rowKey，优化表格渲染及保证树形、展开行、拖拽的正常功能。"}),B("div",me,[a(n(r),{onClick:t[0]||(t[0]=p=>M(!0))},{default:c(()=>[i("显示分页")]),_:1}),a(n(r),{onClick:t[1]||(t[1]=p=>M(!1))},{default:c(()=>[i("隐藏分页")]),_:1}),a(n(r),{onClick:t[2]||(t[2]=p=>N(!0))},{default:c(()=>[i("显示多选")]),_:1}),a(n(r),{onClick:t[3]||(t[3]=p=>N(!1))},{default:c(()=>[i("隐藏多选")]),_:1}),a(n(r),{onClick:K},{default:c(()=>[i("显示/隐藏展开行")]),_:1}),a(n(r),{onClick:J},{default:c(()=>[i("全选/全不选")]),_:1}),a(n(r),{onClick:X},{default:c(()=>[i("添加/删除操作列")]),_:1})])])]),_:1},512),[[se,n(e)]]),a(P,{title:"useTable 示例",class:"flex-1"},{default:c(()=>[R(a(Y,{height:"100%",currentPage:n(d).pageNum,"onUpdate:currentPage":t[4]||(t[4]=p=>n(d).pageNum=p),pageSize:n(d).pageSize,"onUpdate:pageSize":t[5]||(t[5]=p=>n(d).pageSize=p),showSearch:n(e),"onUpdate:showSearch":t[6]||(t[6]=p=>ie(e)?e.value=p:null),onRefresh:n(O),onMount:n(u),onDragSort:q},null,8,["currentPage","pageSize","showSearch","onRefresh","onMount"]),[[Z,n(g)]])]),_:1})])}}}));export{Te as default};
